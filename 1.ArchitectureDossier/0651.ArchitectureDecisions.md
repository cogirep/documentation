## AD-051 : Gestion du linéaire au sein de Géoserver

### Décision d'architecture
| Identifiant | Décision d'architecture                                                      | Domaine        | Date | Comité |
| ----------- | ---------------------------------------------------------------------------- | -------------- | ---- | ------ |
| **AD-051**  | Indépendance du lot 5 temporaire pour la gestion du linéaire. Alternative 01 | **2018-11-09** |


### Enjeux

Le lot 5 a besoin dès à présent de pouvoir manipuler et requêter le réseau linéaire de Vinci Autoroute (PR, tronçon, bretelle,...).
Il a été décidé que le lot 5 allait s'appuyer sur le lot 4 pour obtenir ces informations (Décision n°??).

### Hypothèses

Le lot 4 est en déphasage de planning avec le lot 5

### Alternatives
#### Alternative 01 - Maintenir la dépendance lot 4

Cette approche consiste à mutualiser dès maintenant, en attendant la mise à disposition complète des services du lot 4, les services du lot 4 dans le lot 5 pour permettre d'accèder et de requêter le référentiel linéaire.

**Avantages** :

- Pas de paramétrage temporaire côté Geoserver
- Pas de code à mettre à jour pour remapper les services du lot 4

**Inconvénients** :

- Blocage sur le déployement de certaines fonctionnalités du lot 5, tel que la rechercher de PR, la récupération d'informations autoroutières
- Délais incertain sur la mise à disposition des services du lot 4;
- Instabilité des services du lot 4.

#### Alternative 02 - Isolation des services du lot 4


Cette approche consiste a importé au sein du lot 5 sous forme de fichier au format shapefile, l'ensemble ou une partie des données de référentiel linéaire.

Pour ce faire, on s'appuye sur les webservices de geoserver pour charger les données : 
```bash
curl -u admin:password -v -XPUT -H 'Content-type: application/zip' --data-binary @assets.zip http://dev.geoserver.hyperviseurdevint.par01.containers.appdomain.cloud/geoserver/rest/workspaces/sixense/datastores/assets/file.shp
```

Une fois, ces données importer le serveur a à disposition les couches de données qui permettre de publier le référentiel linéaire.

Les services étant aux standard WMS/WFS pour les deux lots, la migration vers les services du lot 4 sera simple.

**Avantages :**

-	Mise à disposition rapide des services 
-	Total autonomie en attendant les avancées côté lot 4
- Mise en situation des permières brique de la version Hyperviseur produit (commercialisation)

**Inconvénients** :
-	L'ensemble des services du lot 4 ne sont pas reproduits (pas de goécodage par exemple)
-	Risque potentiel de déphasage entre ce qui sera produit par le lot 4 et les services créés côté lot 

### Recommandation

 Alternative 02 – Isolation des services du lot 4

### Justification

  - La sécurisation du planning
  - Mise en place de l'approche "Produit"

### Implications

- Possible surconsommation au moment du rapprochement lot 5 - lot4

### Décisions d'architecture liées
| **Identifiant** | **Decision d'architecture** |
| --------------- | --------------------------- |
| **N/A**         | N/A                         |
