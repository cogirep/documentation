apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: ##INGRESSNAME##
  namespace: ##NAMESPACE##
  annotations:
   ingress.bluemix.net/redirect-to-https: "True"
   ingress.bluemix.net/mutual-auth: "secretName=##APICONNECT_SECRETNAME## port=443"
    #Specific rewrite for geoserver (comment otherwise)
   #ingress.bluemix.net/rewrite-path: "serviceName=lot05-geoserver-service rewrite=/geoserver"
spec:
  tls:
  - hosts:
    - ##HOSTNAME##
    secretName: ##TLSSECRET##
  - hosts:
    - ##EXTERNALHOSTNAME##
    secretName: ##EXTERNALSECRET##
 
  rules:
    - host: ##EXTERNALHOSTNAME##
      http:
        paths:
        - path: /
          backend:
            serviceName: ##SERVICENAME##
            servicePort: ##SERVICEPORT## 
    - host: ##HOSTNAME##
      http:
        paths:
        - path: /
          backend:
            serviceName: ##SERVICENAME##
            servicePort: ##SERVICEPORT##
 